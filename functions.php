<?php
function support_theme_setup(){add_theme_support('title-tag');add_theme_support('post-thumbnails');register_nav_menus(['primary'=>'ë©”ì¸']);}
add_action('after_setup_theme','support_theme_setup');
function support_enqueue_scripts(){wp_enqueue_style('support-style',get_stylesheet_uri());}
add_action('wp_enqueue_scripts','support_enqueue_scripts');
function register_support_card_cpt(){register_post_type('support_card',['labels'=>['name'=>'ì§€ì›ê¸ˆ ì¹´ë“œ','singular_name'=>'ì¹´ë“œ','add_new'=>'ìƒˆ ì¹´ë“œ'],'public'=>true,'has_archive'=>false,'menu_icon'=>'dashicons-money-alt','supports'=>['title','editor'],'show_in_rest'=>true]);}
add_action('init','register_support_card_cpt');
function add_support_card_meta_boxes(){add_meta_box('support_card_details','ì¹´ë“œ ì •ë³´','render_support_card_meta_box','support_card','normal','high');}
add_action('add_meta_boxes','add_support_card_meta_boxes');
function render_support_card_meta_box($post){wp_nonce_field('support_card_save','support_card_nonce');$amount=get_post_meta($post->ID,'_card_amount',true);$amount_sub=get_post_meta($post->ID,'_card_amount_sub',true);$target=get_post_meta($post->ID,'_card_target',true);$period=get_post_meta($post->ID,'_card_period',true);$link=get_post_meta($post->ID,'_card_link',true);$featured=get_post_meta($post->ID,'_card_featured',true);?>
<style>.sp-field{margin:15px 0}.sp-field label{display:block;font-weight:600;margin-bottom:5px}.sp-field input{width:100%;padding:8px;border:1px solid #ddd;border-radius:4px}.sp-btn{background:linear-gradient(135deg,#2563EB 0%,#7C3AED 100%);color:#fff;border:none;padding:12px 24px;border-radius:6px;font-weight:700;cursor:pointer;margin:10px 0}.sp-notice{background:#FEF3C7;padding:12px;margin:15px 0;border-left:4px solid #F59E0B;border-radius:4px}</style>
<div class="sp-notice"><strong>ğŸ¤– ìë™ ìƒì„±:</strong> í‚¤ì›Œë“œ ì…ë ¥ í›„ ë²„íŠ¼ í´ë¦­!<br><small>ì²­ë…„ë„ì•½ê³„ì¢Œ, ì²­ë…„ë‚´ì¼ì±„ì›€ê³µì œ, ê·¼ë¡œì¥ë ¤ê¸ˆ, ìë…€ì¥ë ¤ê¸ˆ, ì²­ë…„ì›”ì„¸ì§€ì›, ê¸°ì´ˆì—°ê¸ˆ, ì¶œì‚°ì§€ì›ê¸ˆ, ì‹¤ì—…ê¸‰ì—¬</small></div>
<div class="sp-field"><label>ğŸ“Œ í‚¤ì›Œë“œ</label><input type="text" id="sp_kw" placeholder="ì˜ˆ: ì²­ë…„ë„ì•½ê³„ì¢Œ"/></div>
<button type="button" class="sp-btn" onclick="spGen()">âœ¨ ìƒì„±</button>
<div id="sp_st" style="padding:10px;margin:10px 0;border-radius:4px;display:none"></div>
<script>
var T={'ì²­ë…„ë„ì•½ê³„ì¢Œ':{t:'ì²­ë…„ë„ì•½ê³„ì¢Œ - 5ë…„ ë§Œê¸° ì‹œ ìµœëŒ€ 5,000ë§Œì›',a:'ìµœëŒ€ 5,000ë§Œì›',s:'ì •ë¶€ ê¸°ì—¬ê¸ˆ+ì´ì',d:'<h2>ì²­ë…„ ë¯¸ë˜ íŠ¹ë³„ ê¸°íšŒ</h2><p>ì›” 70ë§Œì› ë‚©ì… ì‹œ ì •ë¶€ 6% ê¸°ì—¬ê¸ˆ ì¶”ê°€!</p><h3>âœ… ì£¼ìš” í˜œíƒ</h3><ul><li>5ë…„ ë§Œê¸° ìµœëŒ€ 5,000ë§Œì›</li><li>ì •ë¶€ ê¸°ì—¬ê¸ˆ ì§€ì›</li><li>ë¹„ê³¼ì„¸ í˜œíƒ</li></ul><h3>ğŸ¯ ìê²©</h3><p>ë§Œ 19~34ì„¸, ì†Œë“ 7,500ë§Œì› ì´í•˜</p><p><strong>ì„ ì°©ìˆœ ë§ˆê°! ì§€ê¸ˆ ì‹ ì²­í•˜ì„¸ìš”!</strong></p>',tg:'ë§Œ 19~34ì„¸ ì²­ë…„',p:'ìƒì‹œ(ì„ ì°©ìˆœ)',l:'https://www.youthaccount.kr'},'ì²­ë…„ë‚´ì¼ì±„ì›€ê³µì œ':{t:'ì²­ë…„ë‚´ì¼ì±„ì›€ê³µì œ - 2ë…„ ê·¼ì† ì‹œ 1,600ë§Œì›',a:'ìµœëŒ€ 1,600ë§Œì›',s:'ì •ë¶€+ê¸°ì—…',d:'<h2>ì¤‘ì†Œê¸°ì—… ì²­ë…„ ëª©ëˆ</h2><p>2ë…„ ê·¼ì†ìœ¼ë¡œ 1,600ë§Œì›!</p><h3>ğŸ’° êµ¬ì„±</h3><ul><li>ë³¸ì¸: 400ë§Œì›</li><li>ì •ë¶€: 900ë§Œì›</li><li>ê¸°ì—…: 300ë§Œì›</li><li>ì´ 1,600ë§Œì›</li></ul><h3>âœ… ìê²©</h3><p>ë§Œ 15~34ì„¸ ì¤‘ì†Œê¸°ì—… ì •ê·œì§</p>',tg:'ì¤‘ì†Œê¸°ì—… ì²­ë…„',p:'ê¸°ì—… ì°¸ì—¬ ì‹œ',l:'https://www.work.go.kr/jobgong'},'ê·¼ë¡œì¥ë ¤ê¸ˆ':{t:'ê·¼ë¡œì¥ë ¤ê¸ˆ - ìµœëŒ€ 330ë§Œì› í˜„ê¸ˆ',a:'ìµœëŒ€ 330ë§Œì›',s:'ì—° 1íšŒ í˜„ê¸ˆ',d:'<h2>ì €ì†Œë“ ê·¼ë¡œì í˜„ê¸ˆ ì§€ì›</h2><h3>ğŸ’µ ê¸ˆì•¡</h3><ul><li>ë‹¨ë…: ìµœëŒ€ 165ë§Œì›</li><li>í™‘ë²Œì´: 285ë§Œì›</li><li>ë§ë²Œì´: 330ë§Œì›</li></ul><h3>ğŸ“… ì‹ ì²­</h3><p>5ì›” ì •ê¸°, 9ì›” ë°˜ê¸° ì‹ ì²­</p><p>ì‹ ì²­ë§Œ í•˜ë©´ ê³„ì¢Œ ì…ê¸ˆ!</p>',tg:'ì €ì†Œë“ ê·¼ë¡œì',p:'5ì›”,9ì›”',l:'https://www.nts.go.kr/eitc'},'ìë…€ì¥ë ¤ê¸ˆ':{t:'ìë…€ì¥ë ¤ê¸ˆ - ìë…€ë‹¹ 100ë§Œì›',a:'ìë…€ë‹¹ 100ë§Œì›',s:'í˜„ê¸ˆ',d:'<h2>ìë…€ ì–‘ìœ¡ í˜„ê¸ˆ ì§€ì›</h2><p>ìë…€ 1ëª…ë‹¹ 100ë§Œì›!</p><h3>âœ… ì¤‘ë³µ ê°€ëŠ¥</h3><p>ê·¼ë¡œì¥ë ¤ê¸ˆê³¼ í•¨ê»˜ ìµœëŒ€ 600ë§Œì› ì´ìƒ</p><h3>ğŸ“‹ ìê²©</h3><p>ì†Œë“ 4,000ë§Œì› ë¯¸ë§Œ, 18ì„¸ ë¯¸ë§Œ ìë…€</p>',tg:'ì €ì†Œë“ ê°€êµ¬(ìë…€æœ‰)',p:'5ì›”',l:'https://www.nts.go.kr/ctc'},'ì²­ë…„ì›”ì„¸ì§€ì›':{t:'ì²­ë…„ì›”ì„¸ ì§€ì› - ì›” 20ë§Œì›x12ê°œì›”',a:'ìµœëŒ€ 240ë§Œì›',s:'ì›” 20ë§Œì›x12',d:'<h2>ì›”ì„¸ ë¶€ë‹´ í•´ê²°</h2><p>ë§¤ì›” 20ë§Œì›ì”© 12ê°œì›”!</p><h3>âœ… ìê²©</h3><ul><li>ë§Œ 19~34ì„¸ ë¬´ì£¼íƒ</li><li>ë…ë¦½ ê±°ì£¼</li><li>ë³¸ì¸ ì†Œë“ ê¸°ì¤€</li></ul><p>ë¶€ëª¨ ì†Œë“ ë¬´ê´€!</p>',tg:'ë§Œ 19~34ì„¸',p:'ì˜ˆì‚° ì†Œì§„ ì‹œ ë§ˆê°',l:'https://www.bokjiro.go.kr'},'ê¸°ì´ˆì—°ê¸ˆ':{t:'ê¸°ì´ˆì—°ê¸ˆ - ë§¤ì›” 334,810ì›',a:'ì›” 334,810ì›',s:'í‰ìƒ ë§¤ì›”',d:'<h2>ì–´ë¥´ì‹  í‰ìƒ ì—°ê¸ˆ</h2><p>ë§Œ 65ì„¸ ì´ìƒ ë§¤ì›” 334,810ì›</p><h3>âœ… ìê²©</h3><p>ë§Œ 65ì„¸ ì´ìƒ, ì†Œë“ í•˜ìœ„ 70%</p><h3>ğŸ“… ì‹ ì²­</h3><p>ìƒì¼ 1ê°œì›” ì „ë¶€í„° ê°€ëŠ¥</p>',tg:'ë§Œ 65ì„¸ ì´ìƒ',p:'ìƒì¼ 1ê°œì›” ì „',l:'https://basicpension.mohw.go.kr'},'ì¶œì‚°ì§€ì›ê¸ˆ':{t:'ì¶œì‚°ì§€ì›ê¸ˆ - ì²«ì§¸ 200ë§Œì›',a:'ì²«ì§¸ 200ë§Œì›',s:'ë‘˜ì§¸ 300ë§Œì›',d:'<h2>ì¶œì‚° ê°€ì • í˜„ê¸ˆ</h2><h3>ğŸ’° ê¸ˆì•¡</h3><ul><li>ì²«ì§¸: 200ë§Œì›</li><li>ë‘˜ì§¸: 300ë§Œì›</li><li>ì…‹ì§¸: 500ë§Œì›+</li></ul><h3>ğŸ“‹ ì‹ ì²­</h3><p>ì¶œì‚° í›„ 60ì¼ ì´ë‚´</p><p>ì§€ìì²´ ì¶”ê°€ ì§€ì›ë„ í™•ì¸!</p>',tg:'ì¶œì‚° ê°€ì •',p:'ì¶œì‚° í›„ 60ì¼',l:'https://www.bokjiro.go.kr'},'ì‹¤ì—…ê¸‰ì—¬':{t:'ì‹¤ì—…ê¸‰ì—¬ - ìµœëŒ€ 1,782ë§Œì›',a:'ìµœëŒ€ 1,782ë§Œì›',s:'ìµœëŒ€ 270ì¼',d:'<h2>ì‹¤ì§ì ìƒí™œ ì•ˆì •</h2><p>í‰ê· ì„ê¸ˆ 60% ì§€ê¸‰</p><h3>ğŸ“… ê¸°ê°„</h3><ul><li>50ì„¸ ë¯¸ë§Œ: 120~240ì¼</li><li>50ì„¸ ì´ìƒ: ìµœëŒ€ 270ì¼</li></ul><h3>âš ï¸ ê¸°í•œ</h3><p>í‡´ì§ í›„ 12ê°œì›” ì´ë‚´ ì‹ ì²­!</p>',tg:'ì‹¤ì§ì(ê³ ìš©ë³´í—˜)',p:'í‡´ì§ í›„ 12ê°œì›”',l:'https://www.ei.go.kr'}};
function spGen(){var k=document.getElementById('sp_kw').value.trim(),s=document.getElementById('sp_st');if(!k){s.style.cssText='display:block;background:#fee;border:2px solid #f00;color:#c00';s.innerHTML='âŒ í‚¤ì›Œë“œ í•„ìš”';return}s.style.cssText='display:block;background:#fef3c7;border:2px solid #f59e0b;color:#92400e';s.innerHTML='â³ ìƒì„± ì¤‘...';setTimeout(function(){var r=T[k]||{t:k+' - ì§€ê¸ˆ ì‹ ì²­',a:'ìµœëŒ€ 300ë§Œì›',s:'ì •ë¶€ ì§€ì›',d:'<h2>'+k+'</h2><p>ì •ë¶€ ì§€ì› í˜œíƒì…ë‹ˆë‹¤.</p><p>ì¡°ê±´ ì¶©ì¡± ì‹œ ì‹ ì²­ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>',tg:'ëŒ€í•œë¯¼êµ­ êµ­ë¯¼',p:'ìƒì‹œ',l:'https://www.bokjiro.go.kr'};document.getElementById('card_amount').value=r.a;document.getElementById('card_amount_sub').value=r.s;document.getElementById('card_target').value=r.tg;document.getElementById('card_period').value=r.p;document.getElementById('card_link').value=r.l||'';var ti=document.getElementById('title');if(ti)ti.value=r.t;if(typeof tinymce!=='undefined'&&tinymce.get('content')){tinymce.get('content').setContent(r.d);tinymce.get('content').save()}else{var c=document.getElementById('content');if(c)c.value=r.d}var ta=document.querySelector('textarea#content');if(ta){ta.value=r.d;ta.dispatchEvent(new Event('input',{bubbles:true}))}s.style.cssText='display:block;background:#d1fae5;border:2px solid #10b981;color:#065f46';s.innerHTML='âœ… ì™„ë£Œ! ì´ì œ ë°œí–‰ ë²„íŠ¼ë§Œ ëˆ„ë¥´ì„¸ìš”!'},400)}
</script>
<hr style="margin:20px 0;border:none;border-top:1px solid #ddd"/>
<div class="sp-field"><label>ğŸ’° ê¸ˆì•¡</label><input type="text" name="card_amount" id="card_amount" value="<?php echo esc_attr($amount);?>"/></div>
<div class="sp-field"><label>ğŸ’¬ ë¶€ê°€</label><input type="text" name="card_amount_sub" id="card_amount_sub" value="<?php echo esc_attr($amount_sub);?>"/></div>
<div class="sp-field"><label>ğŸ‘¥ ëŒ€ìƒ</label><input type="text" name="card_target" id="card_target" value="<?php echo esc_attr($target);?>"/></div>
<div class="sp-field"><label>ğŸ“… ê¸°ê°„</label><input type="text" name="card_period" id="card_period" value="<?php echo esc_attr($period);?>"/></div>
<div class="sp-field"><label>ğŸ”— URL</label><input type="url" name="card_link" id="card_link" value="<?php echo esc_attr($link);?>"/></div>
<div class="sp-field"><label><input type="checkbox" name="card_featured" value="1" <?php checked($featured,'1');?>/> ğŸ”¥ ì¸ê¸°</label></div>
<?php }
function save_support_card_meta($post_id){if(!isset($_POST['support_card_nonce'])||!wp_verify_nonce($_POST['support_card_nonce'],'support_card_save'))return;if(defined('DOING_AUTOSAVE')&&DOING_AUTOSAVE)return;$fields=['card_amount','card_amount_sub','card_target','card_period','card_link'];foreach($fields as $f)if(isset($_POST[$f]))update_post_meta($post_id,'_'.$f,sanitize_text_field($_POST[$f]));update_post_meta($post_id,'_card_featured',isset($_POST['card_featured'])?'1':'0');}
add_action('save_post_support_card','save_support_card_meta');
